{% set phpbenchArgs = "--progress=travis --report=aggregate --report=env --ansi --retry-threshold=5 --ansi --iterations=30" %}

    phpbench-regression:
        name: "PHPBench Regression ${{ '{{' }} matrix.php-version {{ '}}' }} + ${{ '{{' }} matrix.dependency {{ '}}' }}"

        runs-on: ubuntu-latest

        continue-on-error: ${{ '{{' }} matrix.allow-failures {{ '}}' }}

        strategy:
            matrix:
                php-version: 
                    - '{{ phpVersions|last }}'
                allow-failures: [false]

        steps:
{% include "example/pipeline/template/ci-setup.yml.twig" %}

            - name: "Composer install"
              uses: "ramsey/composer-install@v1"
              with:
                  dependency-versions: "${{ '{{' }} matrix.dependency {{ '}}' }}"

            - name: "Run Benchmarks"
              run: ./.github/phpbench_regression.sh
              env:
                  REPO: "{{ url }}"
